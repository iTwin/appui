/*---------------------------------------------------------------------------------------------
 * Copyright (c) Bentley Systems, Incorporated. All rights reserved.
 * See LICENSE.md in the project root for license terms and full copyright notice.
 *--------------------------------------------------------------------------------------------*/
@use "~@itwin/core-react/lib/core-react/z-index" as *;
@use "../../layout/widgetopacity" as *;
@use "../../layout/widget/variables" as *;

@layer appui.preview {
  .uifw-preview-widgetTabActions-widget_wrapper {
    flex: 1;
  }

  .uifw-preview-widgetTabActions-widget_floating {
    position: absolute;
    min-width: 200px;
    min-height: 120px;
    inline-size: auto;
    transition: opacity var(--iui-duration-2) ease;

    @include uicore-z-index(dragged-widget);
    @include nz-widget-opacity;

    &:where([data-_appui-dragged="true"]) {
      pointer-events: none;
      opacity: $nz-dragged-widget-opacity;

      @include uicore-z-index(drag-preview);
    }

    &:where([data-_appui-hidden="true"]) {
      opacity: 0;
      pointer-events: none;
    }
  }

  .uifw-preview-widgetTabActions-widget_handle {
    grid-column: tabs / tabs-actions;
    grid-row: tabs;
    cursor: grab;
    user-select: none;
    -webkit-user-select: none;
  }

  .uifw-preview-widgetTabActions-widget_tabList {
    grid-area: tabs;
    z-index: 1;

    // Let handle receive pointer events
    pointer-events: none;

    & > * {
      pointer-events: all;
    }
  }

  .uifw-preview-widgetTabActions-widget_tab {
    grid-template:
      "label icon"
      "description icon" minmax(0, auto) / minmax(min-content, 1fr) auto;
    min-inline-size: min-content;
  }

  .uifw-preview-widgetTabActions-widget_panel {
    padding: 0;
    position: relative;
    display: flex;
  }

  .uifw-preview-widgetTabActions-widget_decoration {
    margin-inline-start: var(--iui-size-2xs);

    &[data-_appui-action="true"] {
      anchor-name: --_appui-tab-action;
    }
  }

  .uifw-preview-widgetTabActions-widget_actions {
    z-index: 1;
  }

  .uifw-preview-widgetTabActions-widget_resizeHandle {
    z-index: 1;
  }

  @supports (anchor-name: --_appui-tab-action) {
    .uifw-preview-widgetTabActions-widget_action {
      &:where([data-_appui-anchor="true"]) {
        position: absolute;
        position-anchor: --_appui-tab-action;
        right: anchor(right);
        align-self: anchor-center;
      }
    }
  }
}
